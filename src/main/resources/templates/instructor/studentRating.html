<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="#{student.rating.page.title}"></title>
</head>
<body>

<form method="GET" action="/instructor/studentRating" id="my_form">
</form>
<table>
    <tr>
        <th rowspan="2" th:text="#{student.rating.page.form.header.name}"></th>
        <th rowspan="2" th:text="#{student.rating.page.form.header.surname}"></th>
        <th rowspan="2" th:text="#{student.rating.page.form.header.course.name}"></th>
        <th colspan="3" th:text="#{student.rating.page.form.header.lessons.general}"></th>
        <th rowspan="2" th:text="#{student.rating.page.form.header.lessons.average.mark}"></th>
    </tr>
    <tr>
        <th th:text="#{student.rating.page.form.header.lessons.total}"></th>
        <th th:text="#{student.rating.page.form.header.lessons.attended}"></th>
        <th th:text="#{student.rating.page.form.header.lessons.missed}"></th>
    </tr>
    <tr>
        <th>
            <input type="text" name="name" th:value="${!searchDTO.name.isEmpty()}? ${searchDTO.name} : ''"
                   form="my_form"/>
            <input type="submit" form="my_form" name="sort" value="user.name:ASC">
            <input type="submit" form="my_form" name="sort" value="user.name:DESC">
        </th>
        <th>
            <input type="text" name="surname" th:value="${!searchDTO.surname.isEmpty()}? ${searchDTO.surname} : ''"
                   form="my_form"/>
            <input type="submit" form="my_form" name="sort" value="user.surname:ASC">
            <input type="submit" form="my_form" name="sort" value="user.surname:DESC">
        </th>
        <th>
            <input type="text" name="courseName"
                   th:value="${!searchDTO.courseName.isEmpty()}? ${searchDTO.courseName} : ''" form="my_form"/>
            <input type="submit" form="my_form" name="sort" value="course.name:ASC">
            <input type="submit" form="my_form" name="sort" value="course.name:DESC">
        </th>
        <th>
            <input type="text" name="totalLessons"
                   th:value="${!searchDTO.courseName.isEmpty()}? ${searchDTO.courseName} : ''" form="my_form"/>
            <input type="submit" form="my_form" name="sort" value="course.lessonsAmount:ASC">
            <input type="submit" form="my_form" name="sort" value="course.lessonsAmount:DESC">
        </th>
        <th>
            <input type="text" name="attendedLessons"
                   th:value="${!searchDTO.attendedLessons.isEmpty()}? ${searchDTO.attendedLessons} : ''"
                   form="my_form"/>
            <input type="submit" form="my_form" name="sort" value="attendedLessonsAmount:ASC">
            <input type="submit" form="my_form" name="sort" value="attendedLessonsAmount:DESC">
        </th>
        <th>
            <input type="text" name="missedLessons"
                   th:value="${!searchDTO.missedLessons.isEmpty()}? ${searchDTO.missedLessons} : ''" form="my_form"/>
            <input type="submit" form="my_form" name="sort" value="missedLessonsAmount:ASC">
            <input type="submit" form="my_form" name="sort" value="missedLessonsAmount:DESC">
        </th>
        <th>
            <input type="submit" form="my_form"/>
        </th>
    </tr>
    <tr th:each="studentRating: ${studentRatingList}">
        <th th:text="${studentRating.getUser().getName()}"></th>
        <th th:text="${studentRating.getUser().getSurname()}"></th>
        <th th:text="${studentRating.getCourse().getName()}"></th>
        <th th:text="${studentRating.getCourse().getLessonsAmount()}"></th>
        <th th:text="${studentRating.getAttendance().getAttendedLessonsAmount()}"></th>
        <th th:text="${studentRating.getAttendance().getMissedLessonsAmount()}"></th>
        <th th:text="${studentRating.getAverageMark()}"></th>
    </tr>
</table>
<input th:if="${studentRatingList.totalPages!=1 && !studentRatingList.isFirst()}" type="submit" name="pageNumber"
       value="0" form="my_form">
<input th:if="${studentRatingList.hasPrevious()}" type="submit" name="pageNumber"
       th:value="${studentRatingList.previousPageable().pageNumber}" form="my_form">
<input th:if="${studentRatingList.hasNext()}" type="submit" name="pageNumber"
       th:value="${studentRatingList.nextPageable().pageNumber}" form="my_form">
<input th:if="${studentRatingList.totalPages!=1 && !studentRatingList.isLast()}" type="submit" name="pageNumber"
       th:value="${studentRatingList.totalPages - 1}" form="my_form">
</body>
</html>